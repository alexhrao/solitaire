(this.webpackJsonpsolitaire=this.webpackJsonpsolitaire||[]).push([[0],[,,,,,,,,function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},,,function(e,t,a){e.exports=a(27)},,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n,c=a(0),r=a.n(c),s=a(13),o=a.n(s),i=(a(20),a(21),a(1)),l=a(3),u=a(5),d=a(4),v=a(6),f=a(14),m=a(2),h=a.n(m);a(8),a(9),a(10),a(11);!function(e){e.S="Spades",e.H="Hearts",e.C="Clubs",e.D="Diamonds"}(n||(n={}));var p=n,k=(a(12),150),S=200,y="50px Calibri",C="30px Calibri",b=10,g=30,w=35,E="black",T="black",x="red",N="red",D="white",I="skyblue",P=40,O="darkgray",j=function(e){var t=.3*w;e.beginPath(),e.moveTo(0,t),e.bezierCurveTo(0,0,-g/2,0,-g/2,t),e.bezierCurveTo(-g/2,(w+t)/2,0,(w+t)/2,0,w),e.bezierCurveTo(0,(w+t)/2,g/2,(w+t)/2,g/2,t),e.bezierCurveTo(g/2,0,0,0,0,t),e.closePath(),e.fillStyle=x,e.fill()},z=function(e){var t=g/2+b,a=b;e.translate(t,a),j(e),e.translate(-t,-a);var n=k-(g/2+b),c=S-w/2;e.translate(n,c),e.scale(1,-1),j(e),e.scale(1,-1),e.translate(-n,-c)},M=function(e){var t=g/2,a=w/2,n=t/10,c=t/2;e.beginPath(),e.fillStyle=T,e.moveTo(t,a),e.arc(t-c+n,a,c,0,2*Math.PI),e.moveTo(t,a),e.arc(t+c-n,a,c,0,2*Math.PI),e.moveTo(t,a),e.arc(t,a-c+n,c,0,2*Math.PI),e.moveTo(t,a),e.lineTo(t-t/2,2*a),e.lineTo(t+t/2,2*a),e.fill(),e.closePath()},A=function(e){e.translate(b,b),M(e),e.translate(-b,-b);var t=k-g-b,a=S-w/2;e.translate(t,a),e.scale(1,-1),M(e),e.scale(1,-1),e.translate(-t,-a)},H=function(e){e.beginPath(),e.fillStyle=N,e.moveTo(g/2,0),e.lineTo(0,w/2),e.lineTo(g/2,w),e.lineTo(g,w/2),e.lineTo(g/2,0),e.fill(),e.closePath()},F=function(e){e.translate(b,b),H(e),e.translate(-b,-b);var t=k-g-b,a=S-w/2;e.translate(t,a),e.scale(1,-1),H(e),e.scale(1,-1),e.translate(-t,-a)},J=function(e){var t=.7*w,a=.3*g,n=.7*g;e.beginPath(),e.moveTo(0,0),e.bezierCurveTo(0,t/2,-g/2,t/2,-g/2,t),e.bezierCurveTo(-g/2,1.3*t,0,1.3*t,0,t),e.bezierCurveTo(0,1.3*t,g/2,1.3*t,g/2,t),e.bezierCurveTo(g/2,t/2,0,t/2,0,0),e.closePath(),e.fill(),e.beginPath(),e.moveTo(0,t),e.quadraticCurveTo(0,t+a,-n/2,t+a),e.lineTo(n/2,t+a),e.quadraticCurveTo(0,t+a,0,t),e.closePath(),e.fillStyle=E,e.fill()},B=function(e){e.fillStyle=E;var t=g/2+b,a=b;e.translate(t,a),J(e),e.translate(-t,-a);var n=k-(g/2+b),c=S-w/2;e.translate(n,c),e.scale(1,-1),J(e),e.scale(1,-1),e.translate(-n,-c)},G=function(e){e.lineWidth=1;var t=S/P*2;e.beginPath(),e.strokeStyle="red";for(var a=0;a<P;++a)e.moveTo(0,a*t),e.lineTo(a*t,0);e.closePath(),e.stroke(),e.beginPath();for(var n=0;n<P;++n)e.moveTo(k-n*t,0),e.lineTo(k,n*t);e.closePath(),e.stroke()},R=function(e){e.fillStyle=O,e.fillRect(0,0,k,S)},W=function(e,t){1===t?e.fillText("A",0,0):t<11?e.fillText("".concat(t),0,0):11===t?e.fillText("J",0,0):12===t?e.fillText("Q",0,0):e.fillText("K",0,0)},q=function(e,t){switch(e.font=y,t.suit){case p.S:e.fillStyle=E;break;case p.C:e.fillStyle=T;break;case p.D:e.fillStyle=N;break;case p.H:e.fillStyle=x}e.textAlign="center",e.translate(k/2,S/2),W(e,t.value),e.translate(-k/2,-S/2);var a=k-2*b,n=3*b;e.translate(a,n),e.font=C,W(e,t.value),e.translate(-a,-n);var c=2*b,r=S-1.5*b;e.translate(c,r),e.font=C,W(e,t.value),e.translate(-c,-r)},U=function(e,t){e.clearRect(0,0,k,S),e.fillStyle=t?I:D,e.fillRect(0,0,k,S)},K=function(e){return r.a.createElement("canvas",{id:"canvas".concat(e.suit,"-").concat(e.value),className:"react-card ".concat(e.isShown?"":"no-click"),ref:"canvas",width:k,height:S})},Q=(a(22),function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).componentDidMount=function(){a.renderCard()},a.componentDidUpdate=function(){a.renderCard()},a.render=function(){var e=a.props,t=e.card,n=e.onClick,c=e.moveState;return r.a.createElement("div",{className:"react-card-holder ".concat(void 0===c?"":0===c?"card-move":"card-moved"),onClick:function(){return n(t)}},K(t))},a.renderCard=function(){var e=a.props,t=e.card,n=e.isSelected,c=a.refs.canvas.getContext("2d");if(null!==c){if(U(c,n),!t.isShown)return void G(c);if(-1===t.value)return void R(c);switch(t.suit){case p.C:A(c);break;case p.D:F(c);break;case p.H:z(c);break;case p.S:B(c)}q(c,t)}},a}return Object(v.a)(t,e),t}(c.Component)),$=r.a.createContext([]),L=(a(23),function(e){var t=e.deck,a=e.dealt,n=e.onDeal,c=e.onCardClick,s=null;s=t.length>0?r.a.createElement(Q,{card:{suit:p.S,type:"card",isShown:!1,value:0},onClick:n}):r.a.createElement(Q,{card:{suit:p.S,type:"card",isShown:!0,value:-1},onClick:n});var o=[];return o=a.length>0?[r.a.createElement($.Consumer,{key:"deck-select"},(function(e){var t=a[a.length-1],n=1===e.length&&t.suit===e[0].suit&&t.value===e[0].value;return r.a.createElement(Q,{key:"".concat(t.suit," ").concat(t.value),card:t,onClick:c,isSelected:n})}))]:[r.a.createElement("div",{className:"placeholder-card"},r.a.createElement(Q,{key:"".concat(p.S," -1"),card:{suit:p.S,type:"card",isShown:!0,value:-1},onClick:function(){}}))],r.a.createElement("div",{className:"react-deck"},r.a.createElement("div",{className:"deck-dealer"},s),r.a.createElement("div",{className:"deck-dealt"},o))}),V=(a(24),function(e,t){return function(a){var n=e.findIndex((function(e){return e.value===a.value&&e.suit===a.suit}));t(-1===n?void 0:n)}}),X=function(e){var t=e.column,a=e.onClick,n=t.cards,c=V(n,a),s=0===n.length?[r.a.createElement(Q,{key:"bedrock",card:{type:"card",value:-1,suit:p.S,isShown:!0},onClick:c})]:n.map((function(e){return r.a.createElement($.Consumer,{key:"".concat(e.suit," ").concat(e.value)},(function(t){return function(e,t){var a=-1!==e.findIndex((function(e){return e.suit===t.suit&&e.value===t.value}));return r.a.createElement(Q,{key:"".concat(t.suit," ").concat(t.value),card:t,onClick:c,isSelected:a})}(t,e)}))}));return r.a.createElement("div",{className:"react-column"},s)},Y=(a(25),function(e){var t=e.source,a=e.onClick,n=e.moveInd,c=e.currMoveInd,s=r.a.createElement(Q,{card:{type:"card",value:-1,suit:p.S,isShown:!0},onClick:function(){return a(t)}}),o=t.cards.map((function(e,s){return r.a.createElement($.Consumer,{key:"".concat(e.value," ").concat(e.suit)},(function(o){var i=void 0;n<s?i=1:n===s&&c>=t.index&&(i=0);var l=-1!==o.findIndex((function(t){return t.value===e.value&&t.suit===e.suit}));return r.a.createElement(Q,{key:"".concat(e.value," ").concat(e.suit),moveState:i,card:e,onClick:function(){return a(t)},isSelected:l})}))}));return r.a.createElement("div",{className:"suit-source-container"},r.a.createElement("div",{className:"placeholder-card"},s),o)}),Z=(a(26),2500),_=100;function ee(e){for(var t=e.length,a=Object(f.a)(e);t;){var n=Math.floor(Math.random()*t--),c=a[t];a[t]=a[n],a[n]=c}return a}var te=[],ae=function(e){function t(e){var a;Object(l.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).isFinished=function(){return a.state.sources.every((function(e){return e.cards.length>0&&13===e.cards[e.cards.length-1].value}))},a.finishGame=function(){var e=a.state,t=e.moves,n=e.ticks,c=e.moveInd,s=e.ticker;if(a.isFinished()&&!(c>=0)){var o=new Date(1e3*n).toISOString().substr(11,8),i=null;if(void 0!==h.a.getJSON("stats")){var l=h.a.getJSON("stats"),u=l.moves<t?l.moves:t,d=l.ticks<n?l.ticks:n;i=r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"Congratulations! Finished in ",o," time with ",t," moves!"),r.a.createElement("h1",null,"Best: ",u," moves | ",new Date(1e3*d).toISOString().substr(11,8)," Time")),h.a.set("stats",{moves:u,ticks:d})}else i=r.a.createElement("h1",null,"Congratulations! Finished in ",o," time with ",t," moves!"),h.a.set("stats",{moves:t,ticks:n});window.clearInterval(s),a.handleAnimation(),a.setState({stats:i})}},a.handleAnimation=function(){var e=a.state.moveInd;if(a.isFinished()&&!(e>-1)){var t=function e(){var t=a.state.moveInd;t>51||(a.setState({moveInd:t+1}),window.setTimeout(e,t%4===2?Z:_))};a.setState({moveInd:0},(function(){return window.setTimeout(t,_)}))}},a.pushHistory=function(){var e=a.state,t=e.deck,n=e.sources,c=e.cols,r={deck:{dealt:t.dealt.map((function(e){return Object(i.a)({},e)})),deck:t.deck.map((function(e){return Object(i.a)({},e)})),type:"deck"},sources:n.map((function(e){return{cards:e.cards.map((function(e){return Object(i.a)({},e)})),index:e.index,type:"suitSource"}})),cols:c.map((function(e){return{cards:e.cards.map((function(e){return Object(i.a)({},e)})),index:e.index,type:"column"}}))};te.push(r);var s=a.state.moves;a.setState({moves:s+1})},a.undo=function(){var e=a.state.selected,t=te.pop();t&&(e.cards=[],e.source=void 0,a.setState(Object(i.a)({},t,{selected:e})));var n=a.state.moves;a.setState({moves:n+1})},a.draw=function(){var e=a.state,t=e.selected,n=e.deck,c=e.cardsPerDeal,r=e.moves;if(0===n.deck.length)for(var s=n.dealt.pop();void 0!==s;)s.isShown=!1,n.deck.push(s),s=n.dealt.pop();else if(1===c){var o=n.deck.pop();o.isShown=!0,n.dealt.push(o)}else for(var i=n.deck.length>3?3:n.deck.length,l=0;l<i;++l){var u=n.deck.pop();u.isShown=!0,n.dealt.push(u)}t.cards=[],t.source=void 0,a.setState({selected:t,deck:n,moves:r+1})},a.changeDraw=function(){var e=a.state.cardsPerDeal;a.setState({cardsPerDeal:3===e?1:3})},a.onDeckClick=function(){var e=a.state,t=e.selected,n=e.deck;t.source?(t.cards=[],t.source=void 0):n.dealt.length>0?(t.cards=[n.dealt[n.dealt.length-1]],t.source=n):(t.cards=[],t.source=void 0),a.setState({selected:t})},a.onSuitClick=function(e){var t=a.state,n=t.selected,c=t.sources;if(void 0!==n.source){if(1===n.cards.length){var r=n.cards[0];a.canAppend(e,r)?(a.pushHistory(),a.finalizeSelection(),n=a.state.selected,c=a.state.sources,e.cards.push(r)):(n.source=void 0,n.cards=[])}}else e.cards.length>0&&(n.source=e,n.cards=[e.cards[e.cards.length-1]]);c[e.index]=e,a.setState({selected:n,sources:c}),a.isFinished()&&a.finishGame()},a.onColumnClick=function(e,t){var n=a.state,c=n.selected,r=n.cols;if(void 0!==c.source)"column"===c.source.type?a.canAppend(e,c.cards[0])?(a.pushHistory(),c.cards.forEach((function(t){e.cards.push(t)})),a.finalizeSelection(),c=a.state.selected,r=a.state.cols):(c.cards=[],c.source=void 0):"deck"===c.source.type?a.canAppend(e,c.cards[0])&&(a.pushHistory(),e.cards.push(c.cards[0]),a.finalizeSelection(),c=a.state.selected,r=a.state.cols):"suitSource"===c.source.type&&a.canAppend(e,c.cards[0])&&(a.pushHistory(),e.cards.push(c.cards[0]),a.finalizeSelection(),c=a.state.selected,r=a.state.cols);else if(void 0!==t&&(c.cards=[],c.source=void 0,e.cards[t].isShown)){c.cards=[];for(var s=t;s<e.cards.length;++s)c.cards.push(e.cards[s]);c.source=e}a.setState({selected:c,cols:r})},a.canAppend=function(e,t){if("deck"===e.type)return!1;if("column"===e.type){if(0===e.cards.length)return 13===t.value;var a=e.cards[e.cards.length-1];if((a.suit===p.C||a.suit===p.S)&&(t.suit===p.H||t.suit===p.D)||(a.suit===p.H||a.suit===p.D)&&(t.suit===p.C||t.suit===p.S))return t.value===a.value-1}else if("suitSource"===e.type){if(0===e.cards.length)return 1===t.value;var n=e.cards[e.cards.length-1];return t.suit===n.suit&&t.value===n.value+1}return!1},a.finalizeSelection=function(){var e=a.state,t=e.selected,n=e.sources,c=e.deck,r=e.cols;void 0!==t.source&&("deck"===t.source.type?c.dealt.pop():"column"===t.source.type?(t.cards.forEach((function(){r[t.source.index].cards.pop()})),r[t.source.index].cards.length>0&&(r[t.source.index].cards[r[t.source.index].cards.length-1].isShown=!0)):"suitSource"===t.source.type&&n[t.source.index].cards.pop(),t.cards=[],t.source=void 0,a.setState({selected:t,deck:c,sources:n,cols:r}))},a.render=function(){var e=a.state,t=e.deck,n=e.cols,c=e.sources,s=e.selected,o=e.cardsPerDeal,i=e.moves,l=e.ticks,u=e.stats,d=e.moveInd,v=new Date(1e3*l).toISOString().substr(11,8),f=n.map((function(e){return r.a.createElement(X,{key:e.index,column:e,onClick:function(t){return a.onColumnClick(e,t)}})})),m=c.map((function(e,t){return r.a.createElement(Y,{key:e.index,source:e,onClick:a.onSuitClick,moveInd:12-Math.floor(d/4),currMoveInd:-1===d?-1:d%4})})),h=r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,i," ",1===i?"Move":"Moves"," Made"),r.a.createElement("p",null,v," Time Elapsed"));return r.a.createElement($.Provider,{value:s.cards},r.a.createElement("div",{className:"solitaire-board"},r.a.createElement("div",{className:"solitaire-header"},r.a.createElement("div",{className:"solitaire-stats"},null===u?h:u)),r.a.createElement("div",{className:"solitaire-dealer"},r.a.createElement("div",{className:"solitaire-deck"},r.a.createElement(L,{type:"deck",deck:t.deck,dealt:t.dealt,onDeal:a.draw,onCardClick:a.onDeckClick}),r.a.createElement("button",{type:"button",className:"change-deal",onClick:a.changeDraw},"Deal ",3===o?"1":"3"," per draw")),r.a.createElement("div",{className:"solitaire-source-mat"},r.a.createElement("div",{className:"solitaire-sources"},m),r.a.createElement("div",{className:"solitaire-buttons"},r.a.createElement("button",{type:"button",className:"solitaire-undo",onClick:a.undo,disabled:0===te.length},"Undo"),r.a.createElement("button",{type:"button",className:"solitaire-reset",onClick:function(){(a.isFinished()||window.confirm("Are you sure you would like to start a new game?"))&&window.location.reload()}},"New Game")))),r.a.createElement("div",{className:"solitaire-cols"},f)))};var n=ee(ee(function(){var e=[];return Object.values(p).forEach((function(t){for(var a=1;a<=13;++a){var n={type:"card",value:a,suit:t,isShown:!1};e.push(n)}})),e}())),c=function(e){for(var t=[],a=0;a<7;++a)t.push({type:"column",cards:[],index:a});for(var n=0;n++<7;)for(var c=n-1;c<7;++c)t[c].cards.push(e.pop());for(var r=0;r<7;++r)t[r].cards[r].isShown=!0;return t}(n),s={type:"deck",deck:n,dealt:[]},o=Object.keys(p).map((function(e,t){return{type:"suitSource",index:t,cards:[]}}));return a.state={deck:s,cols:c,sources:o,selected:{type:"selected",cards:[],source:void 0},cardsPerDeal:1,stats:null,moves:0,ticks:0,ticker:window.setInterval((function(){var e=a.state.ticks;a.setState({ticks:e+1})}),1e3),moveInd:-1},a}return Object(v.a)(t,e),t}(c.Component),ne=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(ae,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(ne,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}],[[15,1,2]]]);
//# sourceMappingURL=main.e24fc9b5.chunk.js.map